# WebRTC

## 설명
웹에서 일대일 간 통신을 지원하기 위한 기술이다. RTC는 Real Time Communication 의 약자로, 실시간 통신 기술을 뜻한다. 일대일 간 영상과 음성을 실시간으로 전송하려면, 소켓 통신을 하여야 한다. 웹 어플리케이션 개발자가 웹에서 소켓 통신을 구현하려면 어려웠다. 웹에서도 쉽게 소켓 통신을 하기 위해, WebRTC 기술이 제안이 되었고, 표준으로 채택되어 Chrome, Firefox, Safari 웹 브라우저에 구현이 되었다. 이제 웹 어플리케이션 개발자는 웹 브라우저에서 지원하는 API를 사용하여 일대일 간 영상 및 음성 통신을 쉽게 구현할 수 있게 되었다.

## 기능들
- 미디어 스트림: 영상 및 음성 데이터를 녹화, 녹음하여 스트림으로 만들어줌
- 미디어 인코딩, 디코딩: 웹브라우저에서 내장된 코덱으로 영상 및 음성을 압축하여 전송
- 전송 기능: 영상 및 음성 스트림을 전송할 수 있음.
- 세션 관리: 연결을 관리하고, 열고, 조직화하는 signaling 기술.

## 사용 기술
- UDP: 실시간 데이터 전송을 위해 unreliable 특징을 가진 udp를 사용. 100% 전송 데이터를 보장하지 못하지만, 패킷 데이터를 tcp 보다 빠르게 안정적으로 받을 수 있음. tcp는 누락된 패킷을 다시 요청하기 떄문에 실시간 영상 및 음성을 재생하는 것이 힘들다. 병목 현상의 위험이 발생.

- SDP: Session Description Protocol. 일대일 간 접속 정보와 미디어 정보를 교환하기 위한 기술. SDP 파일을 서로 교환하여 일대일 연결을 지원.

- STUN/TURN/ICE: 일대일로 미디어 데이터 통신을 하기 위해서는 공인 IP가 필요하며, 접속자가 자신의 공인 IP를 알아야 한다. STUN(Session Travelsal Utility for NAT) 서버에 자신의 공인 IP가 무엇인지 요청하면, STUN 서버는 공인 IP를 응답해준다. 이 통신은 STUN 프로토콜이 사용된다. 더 복잡한 사설망에 있을 경우, STUN 프로토콜 통신을 못하는 경우가 있다. 이럴경우, TURN(Travelsal Utility Rely around NAT) 서버를 사용한다. TURN 서버는 중계자 역할로, 중간에서 양 접속자의 미디어 데이터를 받아서 각 상대방 접속자에게 미디어 데이터를 다시 전달한다. WebRTC는 STUN과 TURN 기술을 유틸리티화한 ICE(Interactive Connectivity Establishment) 기술을 사용한다. ICE 서버는 접속자 간 연결할 수 있는 최적의 네트워크 주소가 무엇인지 테스트해서 찾아내는 역할을 한다. 찾아낸 결과는 여러 주소가 될 수 있다. ICE는 STUN 서버를 사용하여, 접속자의 IP 주소를 알아낸다. 만약 복잡한 사설망으로 인해 실패한다면, TURN 서버를 이용한다. 

## 참고
https://www.tutorialspoint.com/webrtc/webrtc_environment.htm