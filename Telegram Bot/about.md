# 텔레그램 봇
- 텔레그램 봇은 당신이 만든 서버의 인터페이스 역할을 한다. 텔레그램 봇은 특별한 계정으로 핸드폰 번호가 필요없이 등록이 된다.
- 텔레그램 봇을 상요하는 방법은 2가지가 있다. 채팅방에 봇을 초대해서 메시지 또는 명령어를 보내는 것이다. 두번째는, 봇이름을 호출하면서 query를 하는 것이다. 인라인 봇이라고 부른다.
- 사용자가 입력한 메시지들, 명령어들, 용청들은 텔레그램 소프트웨어가 당신의 서버로 보낸다. 텔레그램의 중간 서버가 모든 암호화와 API 통신을 담당한다. 당신은 이 중간서버와 간단한 HTTPS를 통해 통신할 수 있다.

## 텔레그램 봇 만들기
- BotFather 텔레그램 봇을 통해 만들 수 있다. 이 봇은 봇을 만들어주고, 인증 토큰을 발급해준다.

## 텔레그램 메시지 업데이트 방법
### 1. getUpdate 방식. long polling 방식.
**getUpdates API**  
Long Polling 방식을 사용하는 텔레그램 봇 API이다. Response 하지 않은 Update들을 리턴해준다. 텔레그램에선 Identifier로 어디까지 업데이트가 되었는 지 계산하고 확인한다.

**Long Polling**  
이 방식은 사실은 push 방식이 아니다. 하지만 push 메커니즘을 모방했다. 보안정책으로 인해 들어오는 http 또는 https 요청이 막히는 환경에서는 push 방식을 사용할 수 없다. 이 때, Long Polling 방식이 적절하다.

클라이언트가 서버에게 정보 요청을 보낸다. 서버에 새로운 정보 업데이트가 없을 때, 서버는 response를 하지 않는다. 정보가 비어있는 상태로도 response를 하지 않는다. 서버는 Response에 보낼 정보가 준비가 될 때까지 request를 대기시킨다. 정보가 준비가 되면, 서버는 즉시 클라이언트에게 Response를 HTTP/S를 통햬 전송한다. 

Long Polling을 통해 Response를 받은 클라이언트는 바로 다른 서버에게 request를 하는 경우가 많다. 이런 방식은 새로운 정보가 업데이트가 되고, 바로 다음 request까지 걸리는 지연시간을 없앤다.

- 업데이트 주기를 정할 수도 있다.
- 많은 request가 있을 때, 모든 request에 response하지 않을 수도 있다. response 수를 제한할 수 있다.

**Poling**
폴링이란 하나의 장치(또는 프로그램)가 충돌 회피 또는 동기화 처리 등을 목적으로 다른 장치(또는 프로그램)의 상태를 주기적으로 검사하여 일정한 조건을 만족할 때 송수신 등의 자료처리를 하는 방식을 말한다.

### 2. webhook 방식
- 실시간으로 메시지 업데이트를 받는다. 하지만 어떤 것이 성공했는지 실패했는지 모른다.
- long polling 방식보다 좀 더 빠르다. 구현하기 쉽다.

## 라이브러리
- JAVA : https://github.com/rubenlagus/TelegramBots/wiki
